; The comparisons test is for the CXXEQ & CXXLT instructions.

%%reg 8

; Load all const values, in this case all variables.
@%__load

  ; Strings
  OBJMK 10 [true] [string] "123"
  OBJMK 11 [true] [string] "123"
  OBJMK 12 [true] [string] "1234"

  ; Floats
  OBJMK 20 [true] [float] 123.55
  OBJMK 21 [true] [float] 123.55
  OBJMK 22 [true] [float] 66.0

  ; Integers
  OBJMK 30 [true] [int] 234234
  OBJMK 31 [true] [int] 234234
  OBJMK 32 [true] [int] 9

  ; Boolean values
  OBJMK 40 [true] [bool] [true]
  OBJMK 41 [true] [bool] [true]
  OBJMK 42 [true] [bool] [false]

  ; Some other const messages
  OBJMK 1 [true] [string] "Success\n"
  OBJMK 2 [true] [string] "Failure\n"

RETRN

; Print the success message
@success
  PRINT 1
RETRN

; Print the failure mesasge
@failure
  PRINT 2
RETRN

; Main function, execute the comparisons here
@main

  CALLF (compare_strings)
  CALLF (compare_floats)
  CALLF (compare_ints)
  CALLF (compare_bools)

RETRN

; Comparison functions

@compare_strings

  OBJMK 500 [true] [string] "Comparing strings\n"
  PRINT 500
  OBJDL 500

  ; Compare equal strings
  CXXEQ 10 11
  JMPFL (.c1)
  CALLF (failure)
  JMPTO (.c1_)
  @.c1
  CALLF (success)
  @.c1_

  ; Compare not equal strings
  CXXEQ 10 12
  JMPFL (.c2)
  CALLF (failure)
  JMPTO (.c2_)
  @.c2
  CALLF (success)
  @.c2_

RETRN

@compare_floats

  OBJMK 500 [true] [string] "Comparing floats\n"
  PRINT 500
  OBJDL 500

  ; Compare equal floats
  CXXEQ 20 21
  JMPFL (.c3)
  CALLF (failure)
  JMPTO (.c3_)
  @.c3
  CALLF (success)
  @.c3_

  ; Compare not equal floats
  CXXEQ 20 22
  JMPFL (.c4)
  CALLF (failure)
  JMPTO (.c4_)
  @.c4
  CALLF (success)
  @.c4_


RETRN

@compare_ints

  OBJMK 500 [true] [string] "Comparing ints\n"
  PRINT 500
  OBJDL 500

  ; Compare equal ints
  CXXEQ 30 31
  JMPFL (.c5)
  CALLF (failure)
  JMPTO (.c5_)
  @.c5
  CALLF (success)
  @.c5_

  ; Compare not equal ints
  CXXEQ 30 32
  JMPFL (.c6)
  CALLF (failure)
  JMPTO (.c6_)
  @.c6
  CALLF (success)
  @.c6_

RETRN

@compare_bools

  OBJMK 500 [true] [string] "Comparing bools\n"
  PRINT 500
  OBJDL 500

  ; Compare equal bools
  CXXEQ 40 41
  JMPFL (.c7)
  CALLF (failure)
  JMPTO (.c7_)
  @.c7
  CALLF (success)
  @.c7_

  ; Compare not equal bools
  CXXEQ 40 42
  JMPFL (.c8)
  CALLF (failure)
  JMPTO (.c8_)
  @.c8
  CALLF (success)
  @.c8_

RETRN
